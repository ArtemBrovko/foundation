/**
 * @author Sergei Lissovski <sergei.lissovski@modera.org>
 */
Ext.define('{{ class_name }}', {
    extend: 'MF.viewsmanagement.views.AbstractView',

    requires: [
        '{% if ui_class %}{{ ui_class }}{% else %}{{ root_namespace }}.view.List{% endif %}'
    ],

    // override
    getId: function() {
        return 'list';
    },
{% if is_home_view %}

    // override
    isHomeView: function() {
        return true;
    },
{% endif %}

    // internal
    onSectionLoaded: function(section) {
        var me = this;

        section.relayEvents(this.getUi(), ['handleaction']);

        var refreshStore = function() {
            if (me.isActive()) {
                me.getUi().getStore().load();
            }
        };

        section.on('recordsupdated', refreshStore);
        section.on('recordsadded', refreshStore);
        section.on('recordsremoved', refreshStore);
    },

    // override
    doCreateUi: function(params, callback) {
        var grid = Ext.create('{% if ui_class %}{{ ui_class }}{% else %}{{ root_namespace }}.view.List{% endif %}');

        callback(grid);
    }
});